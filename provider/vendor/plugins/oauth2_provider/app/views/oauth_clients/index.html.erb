<%= render_help_link('OAuth 2.0 Application', :class => 'page-help-at-action-bar') if defined?(render_help_link)  %>

<h1>OAuth clients</h1>

<% if request.ssl? %>
  <h2>OAuth 2.0 endpoints:</h2>
  <p><strong>Authorization URL:</strong> <%= url_for :controller => :oauth_authorize, :action => :index, :only_path => false %></p>
  <p><strong>Token URL:</strong> <%= url_for :controller => :oauth_token, :action => :get_token, :only_path => false %></p>
<% end %>

<% if @oauth_clients.empty? %>
  <div class="info-box">You have not configured any OAuth clients. Click the 'Add client' button to add one.</div>
<% else %>

<table id="oauth_clients_table" class="list_table">
  <tr>
    <th>Name</th>
    <th>Client Credentials</th>
    <th>Redirect URI</th>
    <th>Action</th>
  </tr>

<% @oauth_clients.each do |oauth_client| %>
  <tr>
    <td><%= link_to oauth_client.name, {:controller => 'oauth_clients', :action => :edit, :id => oauth_client.id}, {:class => 'edit_link'} %></td>
    <td>
      <p><b>Client ID</b>: <%=h oauth_client.client_id %></p>
      <p><b>Client Secret:</b> <%=h oauth_client.client_secret %></p>
    </td>
    <td><%=h oauth_client.redirect_uri %></td>
    <td>
      <%= link_to '<span>Delete</span>', {:controller => 'oauth_clients', :action => :destroy, :id => oauth_client.id}, {:confirm => 'Are you sure?', :method => :delete, :class => 'delete_link', :title => 'Click to delete this client'} %>
    </td>
  </tr>
<% end %>
</table>

<% end %>

<div class="table_actions">
  <%= link_to 'Add client', {:controller => 'oauth_clients', :action => :new}, {:class => 'link_as_button primary', :id => 'new_oauth_client_button'} %>
</div>